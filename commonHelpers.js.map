{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '43399505-93fd90124b6ff62a7ea4f0cc3';\n\nexport async function fetchImage(query, perPage, page) {\n  try {\n    const response = await axios.get(\n      `https://pixabay.com/api/?key=${API_KEY}`,\n      {\n        params: {\n          q: query,\n          image_type: 'photo',\n          orientation: 'horizontal',\n          safesearch: 'true',\n          per_page: perPage,\n          page: page,\n        },\n      }\n    );\n\n    if (response.status !== 200) {\n      throw new Error('Failed to fetch images');\n    }\n\n    return {\n      totalHits: response.data.totalHits,\n      hits: response.data.hits,\n    };\n  } catch (error) {\n    console.error('Error searching images:', error.message);\n    return [];\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\n\nexport function createImageCard(image) {\n  const link = document.createElement('a');\n  link.href = image.largeImageURL;\n\n  const card = document.createElement('div');\n  card.classList.add('card');\n\n  const img = document.createElement('img');\n  img.src = image.webformatURL;\n  img.alt = image.tags;\n\n  const likes = document.createElement('span');\n  likes.textContent = `Likes: ${image.likes}`;\n\n  const views = document.createElement('span');\n  views.textContent = `Views: ${image.views}`;\n\n  const comments = document.createElement('span');\n  comments.textContent = `Comments: ${image.comments}`;\n\n  const downloads = document.createElement('span');\n  downloads.textContent = `Downloads: ${image.downloads}`;\n\n  card.appendChild(img);\n  card.appendChild(likes);\n  card.appendChild(views);\n  card.appendChild(comments);\n  card.appendChild(downloads);\n\n  link.appendChild(card);\n\n  return link;\n}\n\nconst lightbox = new SimpleLightbox('gallery a');\nexport function renderImages(images) {\n  images.forEach(image => {\n    const card = createImageCard(image);\n    gallery.appendChild(card);\n  });\n\n  lightbox.refresh();\n}\n\nexport function initializeLightbox() {\n  new SimpleLightbox('.gallery a', {\n    animationSpeed: 200,\n    animationSlide: true,\n    disableScroll: false,\n    history: false,\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n}\n\nexport function getGalleryCardHeight() {\n  const card = document.querySelector('.card');\n  return card.getBoundingClientRect().height;\n}\n\nexport function scrollToNextGroup(height) {\n  window.scrollBy({\n    top: height,\n    behavior: 'smooth',\n  });\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { fetchImage } from './js/pixabay-api';\nimport {\n  getGalleryCardHeight,\n  initializeLightbox,\n  renderImages,\n  scrollToNextGroup,\n} from './js/render-functions';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst loader = document.getElementById('loader');\nconst gallery = document.querySelector('.gallery');\nconst form = document.querySelector('.form');\nconst input = document.querySelector('input');\nconst loadBtn = document.querySelector('.loadBtn');\n\nlet page = 1;\nlet perPage = 15;\nlet query = '';\nlet totalHits = 0;\n\nform.addEventListener('submit', async evt => {\n  evt.preventDefault();\n  query = input.value.trim();\n\n  if (!query) {\n    iziToast.error({\n      title: 'Error',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      position: 'topRight',\n    });\n    return;\n  }\n  loadBtn.classList.add('hidden');\n  loader.classList.remove('hidden');\n  gallery.innerHTML = '';\n\n  const { totalHits: hitsCount, hits: images } = await fetchImage(\n    query,\n    perPage,\n    page\n  );\n  totalHits = hitsCount;\n  renderImages(images);\n  initializeLightbox();\n\n  loader.classList.add('hidden');\n  if (totalHits > page * perPage) {\n    loadBtn.classList.remove('hidden');\n  }\n});\n\nloadBtn.addEventListener('click', async () => {\n  page += 1;\n  loader.classList.remove('hidden');\n  if (totalHits <= page * perPage) {\n    loadBtn.classList.add('hidden');\n    iziToast.error({\n      position: 'topRight',\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n    return;\n  }\n  const { hits: images } = await fetchImage(query, perPage, page);\n  renderImages(images);\n  const cardHeight = getGalleryCardHeight();\n  scrollToNextGroup(5 * cardHeight);\n  initializeLightbox();\n\n  loader.classList.add('hidden');\n});\n"],"names":["API_KEY","fetchImage","query","perPage","page","response","axios","error","createImageCard","image","link","card","img","likes","views","comments","downloads","lightbox","SimpleLightbox","renderImages","images","initializeLightbox","getGalleryCardHeight","scrollToNextGroup","height","loader","gallery","form","input","loadBtn","totalHits","evt","iziToast","hitsCount","cardHeight"],"mappings":"owBAEA,MAAMA,EAAU,qCAET,eAAeC,EAAWC,EAAOC,EAASC,EAAM,CACrD,GAAI,CACF,MAAMC,EAAW,MAAMC,EAAM,IAC3B,gCAAgCN,CAAO,GACvC,CACE,OAAQ,CACN,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAUC,EACV,KAAMC,CACP,CACF,CACP,EAEI,GAAIC,EAAS,SAAW,IACtB,MAAM,IAAI,MAAM,wBAAwB,EAG1C,MAAO,CACL,UAAWA,EAAS,KAAK,UACzB,KAAMA,EAAS,KAAK,IAC1B,CACG,OAAQE,EAAO,CACd,eAAQ,MAAM,0BAA2BA,EAAM,OAAO,EAC/C,EACR,CACH,CC9BO,SAASC,EAAgBC,EAAO,CACrC,MAAMC,EAAO,SAAS,cAAc,GAAG,EACvCA,EAAK,KAAOD,EAAM,cAElB,MAAME,EAAO,SAAS,cAAc,KAAK,EACzCA,EAAK,UAAU,IAAI,MAAM,EAEzB,MAAMC,EAAM,SAAS,cAAc,KAAK,EACxCA,EAAI,IAAMH,EAAM,aAChBG,EAAI,IAAMH,EAAM,KAEhB,MAAMI,EAAQ,SAAS,cAAc,MAAM,EAC3CA,EAAM,YAAc,UAAUJ,EAAM,KAAK,GAEzC,MAAMK,EAAQ,SAAS,cAAc,MAAM,EAC3CA,EAAM,YAAc,UAAUL,EAAM,KAAK,GAEzC,MAAMM,EAAW,SAAS,cAAc,MAAM,EAC9CA,EAAS,YAAc,aAAaN,EAAM,QAAQ,GAElD,MAAMO,EAAY,SAAS,cAAc,MAAM,EAC/C,OAAAA,EAAU,YAAc,cAAcP,EAAM,SAAS,GAErDE,EAAK,YAAYC,CAAG,EACpBD,EAAK,YAAYE,CAAK,EACtBF,EAAK,YAAYG,CAAK,EACtBH,EAAK,YAAYI,CAAQ,EACzBJ,EAAK,YAAYK,CAAS,EAE1BN,EAAK,YAAYC,CAAI,EAEdD,CACT,CAEA,MAAMO,EAAW,IAAIC,EAAe,WAAW,EACxC,SAASC,EAAaC,EAAQ,CACnCA,EAAO,QAAQX,GAAS,CACtB,MAAME,EAAOH,EAAgBC,CAAK,EAClC,QAAQ,YAAYE,CAAI,CAC5B,CAAG,EAEDM,EAAS,QAAO,CAClB,CAEO,SAASI,GAAqB,CACnC,IAAIH,EAAe,aAAc,CAC/B,eAAgB,IAChB,eAAgB,GAChB,cAAe,GACf,QAAS,GACT,aAAc,MACd,aAAc,GAClB,CAAG,CACH,CAEO,SAASI,GAAuB,CAErC,OADa,SAAS,cAAc,OAAO,EAC/B,sBAAuB,EAAC,MACtC,CAEO,SAASC,EAAkBC,EAAQ,CACxC,OAAO,SAAS,CACd,IAAKA,EACL,SAAU,QACd,CAAG,CACH,CCxDA,MAAMC,EAAS,SAAS,eAAe,QAAQ,EACzCC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAQ,SAAS,cAAc,OAAO,EACtCC,EAAU,SAAS,cAAc,UAAU,EAEjD,IAAIzB,EAAO,EACPD,EAAU,GACVD,EAAQ,GACR4B,EAAY,EAEhBH,EAAK,iBAAiB,SAAU,MAAMI,GAAO,CAI3C,GAHAA,EAAI,eAAc,EAClB7B,EAAQ0B,EAAM,MAAM,OAEhB,CAAC1B,EAAO,CACV8B,EAAS,MAAM,CACb,MAAO,QACP,QACE,2EACF,SAAU,UAChB,CAAK,EACD,MACD,CACDH,EAAQ,UAAU,IAAI,QAAQ,EAC9BJ,EAAO,UAAU,OAAO,QAAQ,EAChCC,EAAQ,UAAY,GAEpB,KAAM,CAAE,UAAWO,EAAW,KAAMb,CAAM,EAAK,MAAMnB,EACnDC,EACAC,EACAC,CACJ,EACE0B,EAAYG,EACZd,EAAaC,CAAM,EACnBC,IAEAI,EAAO,UAAU,IAAI,QAAQ,EACzBK,EAAY1B,EAAOD,GACrB0B,EAAQ,UAAU,OAAO,QAAQ,CAErC,CAAC,EAEDA,EAAQ,iBAAiB,QAAS,SAAY,CAG5C,GAFAzB,GAAQ,EACRqB,EAAO,UAAU,OAAO,QAAQ,EAC5BK,GAAa1B,EAAOD,EAAS,CAC/B0B,EAAQ,UAAU,IAAI,QAAQ,EAC9BG,EAAS,MAAM,CACb,SAAU,WACV,QAAS,4DACf,CAAK,EACD,MACD,CACD,KAAM,CAAE,KAAMZ,GAAW,MAAMnB,EAAWC,EAAOC,EAASC,CAAI,EAC9De,EAAaC,CAAM,EACnB,MAAMc,EAAaZ,IACnBC,EAAkB,EAAIW,CAAU,EAChCb,IAEAI,EAAO,UAAU,IAAI,QAAQ,CAC/B,CAAC"}